<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>js-sdk</title>
<style>
html, body {
	margin: 0;
	padding: 0;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

<script>
//外部自己定義的組產品資料的方法
var doPrdHTML = function (json) {
	var ul = $('<ul/>');
	$.each(json, function (i, item) {
		var li = '<li> ' + item.name + ' (pid:' +item.pid + ')' + '</li>';
		ul.append(li);
	});
	$('body').append(ul);
};


$(function () {
	console.log('page is loaded.');  //發現 local 端跟 server 端執行的順序會不同
	
	//預想此 sdk 提供給外部定義 callback
	MySdk.callback = function () {
		var value = MySdk.getData(); //目前預想是自動會撈取資料, 所以才可以這樣執行
		doPrdHTML(value);
		console.log('外部定義 callback is work.');
	};
	
});
</script>
</head>
<body>

練習 sdk
 
<script>
(function(w, d, p) {
	//MySdk 是我練習用的 sdk 全域 namespace
	MySdk = window.MySdk || (window.MySdk = []);
	//執行要帶入的參數
	MySdk.push({ w: w, d: d, p: p });
	//使用異步載入 sdk 的方法
	var s = document.createElement('script');
	s.type = 'text/javascript';
	s.async = true;
	s.src = 'my-sdk.js?r=' + new Date().getTime();
    
    d.getElementsByTagName('head')[0].appendChild(s);
    
	//var l = document.getElementsByTagName('script');
	//l = l[(l.length - 1)];
	//l.parentNode.insertBefore(s, l);

})(window, document, {token:'CO2', sid:'11', cid:'1002'});
</script>

</body>
</html>