<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Lucas</title>
<script type="text/javascript" src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
<style>
* {
  font-family: '微軟黑體';
}
html, body {
  text-align: center;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
}
.test-box {
  display: flex;
}
button {
  flex: 1 1 0;
  padding: 3rem;
  font-size: 3rem;
  color: rgb(122, 122, 122);
  border: 1px solid rgb(216, 200, 200);
  border-radius: 0;
}
</style>
</head>
<body onload="onload()">
  <a target="_blank" href="https://www.momovod.com/player/ckplayer/index.php?url=https://135zyv6.xw0371.com/2018/12/18/ypfhVwOgiBrqPkmL/playlist.m3u8&title=%E6%B0%B4%E8%A1%8C%E4%BF%A0%20/%20%E6%B5%B7%E7%8E%8BTC1080%E9%AB%98%E6%B8%85%E7%89%88%20%E5%8B%95%E4%BD%9C%E7%89%87%20%E9%AB%98%E6%B8%85%E5%BD%B1%E9%9F%B3%E7%B7%9A%E4%B8%8A%E7%9C%8B%20-%20MoMoVOD">link水行俠</a>

  <div class="test-box ">
    <button onclick="testCall()">測試傳送訊息</button>
    <button onclick="testCall('請問報價')">傳送詢問報價訊息</button>
    <button onclick="testClose()">測試關閉</button>
  </div>
<script>
var lineUserData = null;
function testCall(_txt) {
  let txt = (_txt)? _txt : ("測試拿到的line user資料" + JSON.stringify(lineUserData));
	let msg = [{
		type: "text",
		text: txt
	}];
  //alert(msg);
	liff.sendMessages(msg).then(() => {
		alert('YA!訊息已送出.');
	}).catch((error) => {
		alert("Error getting profile: ");
		alert(JSON.stringify(error));
		liff.closeWindow();
	});;
}
function testClose() {
	liff.closeWindow();
}

function onload() {
	if (liff) {
		liff.init((data) => {
			//alert(JSON.stringify('data: '));
			//alert(JSON.stringify(data));
			liff.getProfile().then((profile) => {
				//alert(JSON.stringify(profile));
				lineUserData = profile;
			}).catch((error) => {
				alert(JSON.stringify(error));
			});
		}, (eror) => {
			//alert(JSON.stringify(eror));
      console.log(eror);
		});
	}
}
</script>
</body>
</html>
